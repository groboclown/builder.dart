Common Data Types for the Builder
=================================

Both the (procedural)[procedural.md] and the (declarative)[declarative.md]
build file techniques share a common set of data types unique to the
builder library.



Resource
--------

A `Resource` defines a single, distinct data source that can be used or
generated by the build.  Most commonly, this represents a local file or
directory, but can represent a URI, or the contents of a zip file, or some
virtual construct to represent an idea of an output (say, a process ID to
represent a server that was started by the build).

Individual resources that can be directly read or written to implement the
`ResourceStreamable` class.  The `FileResource` is one example, and a web page
is another example.

Resources that contain groups of other resources implement the
`ResourceListable` class.  These should know how to extract the contents of
the resource, but that's not necessarily a requirement.  For example, a URL
can be both a web page and a parent to many other web pages, but the code
doesn't necessarily know about the names of all the children pages.  However,
a `ResourceListable` class allows for users to easily create child resources.


_TODO describe how to create and use file and directory resources._



ResourceCollection
------------------

Many times, though, a build action requires working on a collection of
Resources, not necessarily directly related to a `ResourceListable`.  For
example, the operating system uses a Path variable to define which directories
to look in to find executables.

_TODO describe the ways to create a resource collection and how to use it._



Project
-------

Contains the information for the current context of the build project execution.

Most tasks will use the `logger` member to report logging messages.  It also
provides for storing property values that can be passed to later build
tasks.


Logger
------

Logs messages to the defined output.



std.dart
--------

The `package:builder/std.dart` library contains Resource definitions for
the Dart (package layout conventions)[http://pub.dartlang.org/doc/package-layout.html].
This must be explicitly imported, because not every build will follow this
convention.

_TODO define each value in the library._





Tool Data Types
===============

These data types are specific to the tools.



FailureMode
-----------

A function that handles a `Failure` generated during the execution of a target.

    typedef void FailureMode(Failure failure);

    class Failure {
      final Project project;
      final String failureMessage;
      final Resource resource;
      final int line;
      final int charStart;
      final int charEnd;
    }

The standard implementations of `FailureMode` are:

 * **IGNORE_FAILURE** Logs an info-level message and keeps the build running.
 * **WARN_ON_FAILURE** Logs a warning-level message and keeps the build running.
 * **SET_PROPERTY_ON_FAILURE** Sets a `Project` property value and keeps the build running.
 * **STOP_ON_FAILURE** Stops the build with an error.



